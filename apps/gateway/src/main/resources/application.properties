spring.application.name=api-gateway
server.port=8080

# Use reactive web application type required by Spring Cloud Gateway
spring.main.web-application-type=reactive

# Service URLs - configurable via environment variables (defaults for local dev)
services.catalog.url=${SERVICES_CATALOG_URL:http://localhost:8081}
services.customers.url=${SERVICES_CUSTOMERS_URL:http://localhost:8082}
services.orders.url=${SERVICES_ORDERS_URL:http://localhost:8083}
services.payments.url=${SERVICES_PAYMENTS_URL:http://localhost:8084}
services.prescriptions.url=${SERVICES_PRESCRIPTIONS_URL:http://localhost:8085}
services.inventory.url=${SERVICES_INVENTORY_URL:http://localhost:8086}
services.notifications.url=${SERVICES_NOTIFICATIONS_URL:http://localhost:8087}

# Actuator
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# CORS - Intentionally permissive
spring.web.cors.allowed-origins=*
spring.web.cors.allowed-methods=*
spring.web.cors.allowed-headers=*

# Logging
logging.level.com.microfocus.example=DEBUG
logging.level.org.springframework.web=DEBUG

# Swagger UI aggregator: points to each service's OpenAPI JSON
# Uses direct environment variables so gateway can be configured in Azure
springdoc.swagger-ui.urls[0].name=Catalog
springdoc.swagger-ui.urls[0].url=${SERVICES_CATALOG_URL:http://localhost:8081}/v3/api-docs
springdoc.swagger-ui.urls[1].name=Customers
springdoc.swagger-ui.urls[1].url=${SERVICES_CUSTOMERS_URL:http://localhost:8082}/v3/api-docs
springdoc.swagger-ui.urls[2].name=Orders
springdoc.swagger-ui.urls[2].url=${SERVICES_ORDERS_URL:http://localhost:8083}/v3/api-docs
springdoc.swagger-ui.urls[3].name=Payments
springdoc.swagger-ui.urls[3].url=${SERVICES_PAYMENTS_URL:http://localhost:8084}/v3/api-docs
springdoc.swagger-ui.urls[4].name=Prescriptions
springdoc.swagger-ui.urls[4].url=${SERVICES_PRESCRIPTIONS_URL:http://localhost:8085}/v3/api-docs
springdoc.swagger-ui.urls[5].name=Inventory
springdoc.swagger-ui.urls[5].url=${SERVICES_INVENTORY_URL:http://localhost:8086}/v3/api-docs
springdoc.swagger-ui.urls[6].name=Notifications
springdoc.swagger-ui.urls[6].url=${SERVICES_NOTIFICATIONS_URL:http://localhost:8087}/v3/api-docs

# Expose the Swagger UI at /swagger-ui.html (default)
springdoc.swagger-ui.path=/swagger-ui.html
